<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Foodbook.Converters"
             x:Class="Foodbook.Views.Components.GenericListComponent"
             x:Name="ListComponent">
    
    <ContentView.Resources>
        <converters:InvertedBoolConverter x:Key="InvertedBoolConverter" />
    </ContentView.Resources>

    <!-- Use MeasureAllItems so items with wrapped titles can grow vertically without clipping -->
    <CollectionView x:Name="InnerCollectionView"
                    ItemsSource="{Binding ItemsSource, Source={x:Reference ListComponent}}"
                    Style="{StaticResource ListCollectionView}"
                    RemainingItemsThreshold="10"
                    ItemTemplate="{Binding ItemTemplate, Source={x:Reference ListComponent}}"
                    ItemSizingStrategy="MeasureAllItems">
        
        <CollectionView.ItemsLayout>
            <LinearItemsLayout Orientation="Vertical" ItemSpacing="0" />
        </CollectionView.ItemsLayout>
        
        <CollectionView.EmptyView>
            <StackLayout HorizontalOptions="Center" VerticalOptions="Center" Padding="20">
                <Label Text="{Binding EmptyTitle, Source={x:Reference ListComponent}}"
                       FontSize="18"
                       HorizontalOptions="Center"
                       TextColor="{DynamicResource FrameTextColor}" />
                <Label Text="{Binding EmptyHint, Source={x:Reference ListComponent}}"
                       FontSize="14"
                       HorizontalOptions="Center"
                       TextColor="{DynamicResource FrameTextColor}"
                       Margin="0,10,0,0" />
            </StackLayout>
        </CollectionView.EmptyView>
        
    </CollectionView>

</ContentView>