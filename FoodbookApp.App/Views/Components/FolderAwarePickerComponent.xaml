<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:Foodbook.Converters"
             xmlns:components="clr-namespace:Foodbook.Views.Components"
             x:Class="Foodbook.Views.Components.FolderAwarePickerComponent"
             x:Name="ThisComponent"
             x:DataType="components:FolderAwarePickerComponent">

    <ContentView.Resources>
        <converters:IsNotNullToColorConverter x:Key="IsNotNullToColorConverter" />
    </ContentView.Resources>

    <!-- Simple picker-like interface that opens a dialog -->
    <Border BackgroundColor="{DynamicResource FrameBackgroundColor}"
            Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 6"
            MinimumHeightRequest="44">
        
        <Grid ColumnDefinitions="*,Auto" Padding="12,8">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding OpenSelectionDialogCommand, Source={x:Reference ThisComponent}}" />
            </Grid.GestureRecognizers>
            
            <!-- Display text -->
            <Label Grid.Column="0" 
                   FontSize="14" 
                   VerticalOptions="Center" 
                   LineBreakMode="TailTruncation" 
                   Text="{Binding DisplayText, Source={x:Reference ThisComponent}}" 
                   TextColor="{Binding SelectedRecipe, Source={x:Reference ThisComponent}, Converter={StaticResource IsNotNullToColorConverter}}" />
        </Grid>
    </Border>
</ContentView>