<?xml version="1.0" encoding="utf-8" ?>
<mct:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
           xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
           xmlns:mct="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui"
           x:Class="Foodbook.Views.Components.SimpleListPopup"
           x:Name="ThisPopup"
           CanBeDismissedByTappingOutsideOfPopup="True"
           Padding="0"
           Margin="0">
    <Border BackgroundColor="{DynamicResource PageBackgroundColor}"
            StrokeShape="RoundRectangle 16"
            StrokeThickness="1"
            Stroke="{DynamicResource Secondary}"
            MinimumWidthRequest="320"
            MaximumWidthRequest="520"
            MinimumHeightRequest="240"
            MaximumHeightRequest="650">
        <Grid RowDefinitions="Auto,*,Auto" Padding="0">
            <!-- Header (no add button here) -->
            <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Padding="16,14" BackgroundColor="{DynamicResource ShellBackgroundColor}">
                <Label Grid.Column="0"
                       x:Name="TitleLabel"
                       FontSize="20"
                       FontAttributes="Bold"
                       TextColor="{DynamicResource ShellTitleColor}"
                       HorizontalTextAlignment="Center"
                       VerticalOptions="Center" />
               
                <Button Grid.Column="1"
                        Text="âœ•"
                        FontSize="18"
                        WidthRequest="32"
                        HeightRequest="32"
                        CornerRadius="16"
                        BackgroundColor="Transparent"
                        TextColor="{DynamicResource ShellTitleColor}"
                        Command="{Binding CloseCommand, Source={x:Reference ThisPopup}}" />
            </Grid>

            <!-- List -->
            <ScrollView Grid.Row="1" Padding="16,12">
                <StackLayout x:Name="ItemsHost" Spacing="8" />
            </ScrollView>

            <!-- Footer with Edit and Cancel buttons -->
            <Grid Grid.Row="2" ColumnDefinitions="Auto,*,Auto" Padding="16,12" BackgroundColor="{DynamicResource ShellBackgroundColor}">
                <!-- Edit button (visible only when showing recipe) -->
                <Button Grid.Column="0"
                        x:Name="EditRecipeButton"
                        Text="Edytuj"
                        FontSize="15"
                        FontAttributes="Bold"
                        BackgroundColor="{DynamicResource Primary}"
                        TextColor="{DynamicResource ButtonPrimaryText}"
                        CornerRadius="8"
                        Padding="16,8"
                        Command="{Binding EditRecipeCommand, Source={x:Reference ThisPopup}}"
                        IsVisible="False" />
                
                <Label Grid.Column="1" />
                
                <!-- Cancel button -->
                <Button Grid.Column="2"
                        Text="Anuluj"
                        FontSize="15"
                        FontAttributes="Bold"
                        BackgroundColor="Transparent"
                        TextColor="{DynamicResource ShellTitleColor}"
                        Command="{Binding CloseCommand, Source={x:Reference ThisPopup}}" />
            </Grid>
        </Grid>
    </Border>
</mct:Popup>
